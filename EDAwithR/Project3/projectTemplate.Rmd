TITLE by Anna Li
========================================================

```{r echo=FALSE, message=FALSE, warning=FALSE, packages}
# Load all of the packages that you end up using
# in your analysis in this code chunk.

# Notice that the parameter "echo" was set to FALSE for this code chunk.
# This prevents the code from displaying in the knitted HTML output.
# You should set echo=FALSE for all code chunks in your file.

library(ggplot2)
```

```{r echo=FALSE, include=FALSE, Load_the_Data}
# Load the Data into "com" (abbreviation of company)
# See WrangleInc5000.py for python code that cleaned and
# subsetted original CSV before importing to R

getwd()
setwd("/Users/horsepower/Dropbox/Udacity/NanoDA/EDAwithR/Project3/")
com <- read.csv("Inc5000_Companies_2014_subset.csv")
# Rename the first column with a null variable name to "rowNum"
names(com)[names(com) == 'X'] <- 'row_num'
```

# Summary statistics
## Preliminary look at the Inc. 5000 Company List data set. 

List of all variables in the dataframe
```{r echo=FALSE}
names(com)
```

Dimensions of the dataframe
```{r echo=FALSE}
dim(com)
```

Structure of dataframe with preview of data values
```{r echo=FALSE}
str(com)
# Change rank to ordered factor since the variable 
# is categorical and order matters
com$rank <- as.ordered(com$rank)
```

Explore factor variables and the different levels in State and Industry
```{r echo=FALSE}
levels(com$state_l)
levels(com$industry)

```

Summary of the data set
```{r echo=FALSE}
summary(com)
```

## Initial Observations from a summary of the data set
* There are 5000 companies ranked from 1 to 5000 based on their percentage growth in 2014, from greatest rate of growth (ranked 1) to slowest rate of growth (ranked 5000).
    + Greatest rate of growth is 158956.91%, lowest is 42.45%
* There are companies representing all 50 states plus one territory (Puerto Rico), resulting in 51 levels for state.
* The minimum number of works is 0 (need to explore further how it is possible to have no employees) with the maximum at 34219. Most companies on the list have under 150 employees.
* The top 5 states with the greatest number of companies on the list are: California, Texas, New York, Florida, and Virginia. But the top 5 cities with the greatest number of companies on the list are: New York, Chicago, Atlanta, Austin, and San Diego. It may be worth figuring out why the top states and top cities don't match.
* The top industries representing greatest growth are: IT, Ad & Marketing, Business Products & Services, Health, and Software.
* For most companies, it is their first or second year on the list. About a quarter have been on the list for more than 4 times, with 12 years being the highest number of years any one company has been on the list.

# Univariate Plots Section
Histogram of states where companies are located
```{r echo=FALSE, Univariate_Plots}
ggplot(data = com, aes(x = state_l)) +
    geom_bar() +
    xlab("State") + 
    ylab("Count") +
    # densely packed x axis labels need spacing
    theme(axis.text.x = element_text(angle = 45, 
                                     hjust = 1)) +
    ggtitle("Count of states where 
            companies are located")

```

Histograms of workers by count

```{r echo=FALSE, Univariate_Plots}
ggplot(data = com, aes(x = workers)) +
    geom_histogram() +
    xlab("Workers") + 
    ylab("Count") +
    ggtitle("Count of Workers")
```

First plot doesn't have small enough binwidths to see the trend. Reduce binwidth shows
a histogram plot that skews right. What happens to distribution if I perform a 
long10 transformation?
```{r echo=FALSE, Univariate_Plots}
ggplot(data = com, aes(x = workers)) +
    geom_histogram(binwidth = 10, 
                   color = 'black', fill = '#F79420') +
    # cut out some outliers
    xlim(0, 1000) +
    xlab("Workers") + 
    ylab("Count") +
    ggtitle("Count of Workers")

```

Transforming the long tail by taking the log10 of workers
helps better understand the distribution of workers. The transformed workers distribution 
looks close to a normal distribution with a longer tail on the right. 
```{r echo=FALSE, Univariate_Plots}
ggplot(data = com, aes(x = workers)) +
    geom_histogram(binwidth = .05,
                   color = 'black', fill = '#F79420') +
    scale_x_log10() +
    xlab("Workers") + 
    ylab("Count") +
    ggtitle("Count of Workers (log10)")

summary(com$workers)

```


Distribution of industry
```{r echo=FALSE, Univariate_Plots}
ggplot(data = com, aes(x = industry)) +
    geom_bar() +
    theme(axis.text.x = element_text(angle = 45, 
                                     hjust = 1))
```

Distribution of growth
```{r echo=FALSE, Univariate_Plots}
ggplot(data = com, aes(x = growth)) +
    geom_histogram(binwidth = 10,
                   color = 'black', fill = '#F79420') +
    scale_x_continuous(limits = c(0, 1000))

ggplot(data = com, aes(x = growth)) +
    geom_histogram(binwidth = 10,
                   color = 'black', fill = '#F79420') +
    scale_x_log10()

summary(com$growth)
```

Distribution of revenue
```{r echo=FALSE, Univariate_Plots}
ggplot(data = com, aes(x = revenue)) +
    geom_histogram()

range(com$revenue)

ggplot(data = com, aes(x = revenue)) +
    geom_histogram(binwidth = 5528202691/5000,
                   color = 'black', fill = '#F79420'
    


```

The distribution of growth and revenue look really similar. Let's try another type of plot to tease apart how the distributions differ. The frequency polygon plot better shows the diffent shapes of the distributions. The amount of growth is based on revenue generated so it is not surprising the two distributions are similar since they are highly correlated.   

```{r echo=FALSE, Univariate_Plots}

ggplot(data = com, aes(x = growth)) +
    geom_freqpoly() +
    scale_x_log10()

ggplot(data = com, aes(x = revenue)) +
    geom_freqpoly() +
    scale_x_log10()


ggplot(data = com, aes(x = growth)) +
    geom_density() +
    scale_x_log10()

ggplot(data = com, aes(x = revenue)) +
    geom_density() +
    scale_x_log10()


```


# Univariate Analysis

### What is the structure of your dataset?

### What is/are the main feature(s) of interest in your dataset?

### What other features in the dataset do you think will help support your investigation into your feature(s) of interest?

### Did you create any new variables from existing variables in the dataset?

### Of the features you investigated, were there any unusual distributions? Did you perform any operations on the data to tidy, adjust, or change the form of the data? If so, why did you do this?


geom_boxplot, geom_point, geom_violin, geom_jitter with geom_rug, geom_point(stat = 'summary'), geom_bin2d, geom_tile, geom_density2d,  
# Bivariate Plots Section
```{r echo=FALSE, Bivariate_Plots}

```

# Bivariate Analysis

### Talk about some of the relationships you observed in this part of the investigation. How did the feature(s) of interest vary with other features in the dataset?

### Did you observe any interesting relationships between the other features (not the main feature(s) of interest)?

### What was the strongest relationship you found?




# Multivariate Plots Section

```{r echo=FALSE, Multivariate_Plots}

```

# Multivariate Analysis

### Talk about some of the relationships you observed in this part of the investigation. Were there features that strengthened each other in terms of looking at your feature(s) of interest?

### Were there any interesting or surprising interactions between features?

### OPTIONAL: Did you create any models with your dataset? Discuss the strengths and limitations of your model.

------

# Final Plots and Summary

### Plot One
```{r echo=FALSE, Plot_One}

```

### Description One


### Plot Two
```{r echo=FALSE, Plot_Two}

```

### Description Two


### Plot Three
```{r echo=FALSE, Plot_Three}

```

### Description Three

------

# Reflection
